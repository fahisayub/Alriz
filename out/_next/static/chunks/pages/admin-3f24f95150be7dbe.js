(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return r(5560)}])},5560:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(5893),s=r(7294),a=r(7963),i=r(7747),l=r(6554),c=r(7030),o=r(3179),u=r(6914),d=r(5432),[m,p]=(0,r(5227).k)({name:"TableStylesContext",errorMessage:"useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Table />\" "}),h=(0,l.G)((e,t)=>{let r=(0,c.jC)("Table",e),{className:s,layout:a,...i}=(0,o.Lr)(e);return(0,n.jsx)(m,{value:r,children:(0,n.jsx)(u.m.table,{ref:t,__css:{tableLayout:a,...r.table},className:(0,d.cx)("chakra-table",s),...i})})});h.displayName="Table";var f=(0,l.G)((e,t)=>{let r=p();return(0,n.jsx)(u.m.thead,{...e,ref:t,__css:r.thead})}),x=(0,l.G)((e,t)=>{let r=p();return(0,n.jsx)(u.m.tr,{...e,ref:t,__css:r.tr})}),j=(0,l.G)(({isNumeric:e,...t},r)=>{let s=p();return(0,n.jsx)(u.m.th,{...t,ref:r,__css:s.th,"data-is-numeric":e})}),_=(0,l.G)((e,t)=>{let r=p();return(0,n.jsx)(u.m.tbody,{...e,ref:t,__css:r.tbody})}),y=(0,l.G)(({isNumeric:e,...t},r)=>{let s=p();return(0,n.jsx)(u.m.td,{...t,ref:r,__css:s.td,"data-is-numeric":e})}),b=r(4225),w=()=>{let[e,t]=(0,s.useState)([]),r=(0,a.p)();(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/meal/swap"),r=await e.json();console.log("Fetched swap requests:",r),Array.isArray(r)?t(r):t([])}catch(e){console.error(e),r({title:"Error",description:"An error occurred while fetching swap requests",status:"error",duration:5e3,isClosable:!0})}})()},[r]);let l=async n=>{try{let s=await fetch("/api/meal/swap/".concat(n,"/approve"),{method:"POST"});if(s.ok)r({title:"Success",description:"Swap request approved successfully",status:"success",duration:5e3,isClosable:!0}),t(e.filter(e=>e.id!==n));else{let e=await s.json();r({title:"Error",description:e.message,status:"error",duration:5e3,isClosable:!0})}}catch(e){console.error(e),r({title:"Error",description:"An error occurred while approving the swap request",status:"error",duration:5e3,isClosable:!0})}},c=async n=>{try{let s=await fetch("/api/meal/swap/".concat(n,"/reject"),{method:"POST"});if(s.ok)r({title:"Success",description:"Swap request rejected successfully",status:"success",duration:5e3,isClosable:!0}),t(e.filter(e=>e.id!==n));else{let e=await s.json();r({title:"Error",description:e.message,status:"error",duration:5e3,isClosable:!0})}}catch(e){console.error(e),r({title:"Error",description:"An error occurred while rejecting the swap request",status:"error",duration:5e3,isClosable:!0})}};return(0,n.jsx)(i.xu,{maxW:"md",mx:"auto",mt:8,children:(0,n.jsxs)(h,{variant:"simple",children:[(0,n.jsx)(f,{children:(0,n.jsxs)(x,{children:[(0,n.jsx)(j,{children:"Home ID"}),(0,n.jsx)(j,{children:"Meal Type"}),(0,n.jsx)(j,{children:"New Date"}),(0,n.jsx)(j,{children:"Actions"})]})}),(0,n.jsx)(_,{children:e.map(e=>(0,n.jsxs)(x,{children:[(0,n.jsx)(y,{children:e.homeId}),(0,n.jsx)(y,{children:e.mealType}),(0,n.jsx)(y,{children:e.newDate}),(0,n.jsxs)(y,{children:[(0,n.jsx)(b.z,{colorScheme:"teal",size:"sm",onClick:()=>l(e.id),children:"Approve"}),(0,n.jsx)(b.z,{colorScheme:"red",size:"sm",ml:2,onClick:()=>c(e.id),children:"Reject"})]})]},e.id))})]})})}},4225:function(e,t,r){"use strict";r.d(t,{z:function(){return x}});var n=r(7294),[s,a]=(0,r(5227).k)({strict:!1,name:"ButtonGroupContext"}),i=r(6914),l=r(5432),c=r(5893);function o(e){let{children:t,className:r,...s}=e,a=(0,n.isValidElement)(t)?(0,n.cloneElement)(t,{"aria-hidden":!0,focusable:!1}):t,o=(0,l.cx)("chakra-button__icon",r);return(0,c.jsx)(i.m.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...s,className:o,children:a})}o.displayName="ButtonIcon";var u=r(1136);function d(e){let{label:t,placement:r,spacing:s="0.5rem",children:a=(0,c.jsx)(u.$,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:d,...m}=e,p=(0,l.cx)("chakra-button__spinner",o),h="start"===r?"marginEnd":"marginStart",f=(0,n.useMemo)(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[h]:t?s:0,fontSize:"1em",lineHeight:"normal",...d}),[d,t,h,s]);return(0,c.jsx)(i.m.div,{className:p,...m,__css:f,children:a})}d.displayName="ButtonSpinner";var m=r(1103),p=r(6554),h=r(7030),f=r(3179),x=(0,p.G)((e,t)=>{let r=a(),s=(0,h.mq)("Button",{...r,...e}),{isDisabled:o=null==r?void 0:r.isDisabled,isLoading:u,isActive:p,children:x,leftIcon:_,rightIcon:y,loadingText:b,iconSpacing:w="0.5rem",type:g,spinner:v,spinnerPlacement:S="start",className:C,as:N,...k}=(0,f.Lr)(e),E=(0,n.useMemo)(()=>{let e={...null==s?void 0:s._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...s,...!!r&&{_focus:e}}},[s,r]),{ref:q,type:T}=function(e){let[t,r]=(0,n.useState)(!e);return{ref:(0,n.useCallback)(e=>{e&&r("BUTTON"===e.tagName)},[]),type:t?"button":void 0}}(N),G={rightIcon:y,leftIcon:_,iconSpacing:w,children:x};return(0,c.jsxs)(i.m.button,{ref:(0,m.qq)(t,q),as:N,type:null!=g?g:T,"data-active":(0,l.PB)(p),"data-loading":(0,l.PB)(u),__css:E,className:(0,l.cx)("chakra-button",C),...k,disabled:o||u,children:[u&&"start"===S&&(0,c.jsx)(d,{className:"chakra-button__spinner--start",label:b,placement:"start",spacing:w,children:v}),u?b||(0,c.jsx)(i.m.span,{opacity:0,children:(0,c.jsx)(j,{...G})}):(0,c.jsx)(j,{...G}),u&&"end"===S&&(0,c.jsx)(d,{className:"chakra-button__spinner--end",label:b,placement:"end",spacing:w,children:v})]})});function j(e){let{leftIcon:t,rightIcon:r,children:n,iconSpacing:s}=e;return(0,c.jsxs)(c.Fragment,{children:[t&&(0,c.jsx)(o,{marginEnd:s,children:t}),n,r&&(0,c.jsx)(o,{marginStart:s,children:r})]})}x.displayName="Button"},7747:function(e,t,r){"use strict";r.d(t,{xu:function(){return i}});var n=r(6914),s=r(6554),a=r(5893),i=(0,n.m)("div");i.displayName="Box";var l=(0,s.G)(function(e,t){let{size:r,centerContent:n=!0,...s}=e;return(0,a.jsx)(i,{ref:t,boxSize:r,__css:{...n?{display:"flex",alignItems:"center",justifyContent:"center"}:{},flexShrink:0,flexGrow:0},...s})});l.displayName="Square",(0,s.G)(function(e,t){let{size:r,...n}=e;return(0,a.jsx)(l,{size:r,ref:t,borderRadius:"9999px",...n})}).displayName="Circle"},1103:function(e,t,r){"use strict";r.d(t,{lq:function(){return s},qq:function(){return a}});var n=r(7294);function s(...e){return t=>{e.forEach(e=>{!function(e,t){if(null!=e){if("function"==typeof e){e(t);return}try{e.current=t}catch(r){throw Error(`Cannot assign value '${t}' to ref '${e}'`)}}}(e,t)})}}function a(...e){return(0,n.useMemo)(()=>s(...e),e)}},7963:function(e,t,r){"use strict";r.d(t,{p:function(){return l}});var n=r(8266),s=r(2321),a=r(3058),i=r(7294);function l(e){let{theme:t}=(0,a.uP)(),r=(0,n.OX)();return(0,i.useMemo)(()=>(0,s.Cj)(t.direction,{...r,...e}),[e,t.direction,r])}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=577)}),_N_E=e.O()}]);